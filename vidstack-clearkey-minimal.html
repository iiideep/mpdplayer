<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>最简单的 Vidstack ClearKey 示例</title>
    <link rel="stylesheet" href="https://cdn.vidstack.io/player/theme.css">
    <link rel="stylesheet" href="https://cdn.vidstack.io/player/video.css">
    <style>
        body { margin: 0; background: #000; }
        #player { width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <div id="player"></div>
    
    <script type="module">
        import { VidstackPlayer, VidstackPlayerLayout } from 'https://cdn.vidstack.io/player.core';
        
        // 最简单的配置
        const player = await VidstackPlayer.create({
            target: '#player',
            src: 'https://qp-pldt-live-grp-05-prod.akamaized.net/out/u/cg_spotvhd.mpd',
            viewType: 'video',
            streamType: 'live',
            layout: new VidstackPlayerLayout(),
            
            // ClearKey DRM 配置
            drm: {
                clearkey: {
                    keys: {
                        "ec7ee27d83764e4b845c48cca31c8eef": "9c0e4191203fccb0fde34ee29999129e"
                    }
                }
            },
            
            muted: true,
            autoPlay: false
        });
        
        // 基本事件监听
        player.addEventListener('canplay', () => {
            console.log('✅ 可以播放');
            player.play();
        });
        
        player.addEventListener('error', (e) => {
            console.error('❌ 播放错误:', e.detail);
        });
        
        player.addEventListener('encrypted', () => {
            console.log('🔒 检测到加密媒体');
        });
        
        console.log('🎬 播放器已初始化');
    </script>
</body>
</html>